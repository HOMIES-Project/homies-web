<img src="../../../assets/svg/bluePencil.svg" style="margin-right: 5%;" *ngIf="this.isEditting"
  (click)="openEditExpense(this.expenseFromChild, task)" />

<button class="btn btn-outline-info mt-3 formButton text-white" *ngIf="this.isCreating"
  (click)="openAddExpense(task)">Añadir gasto</button>




<ng-template #task let-modal>
  <div class="justify-content-center align-items-center">
    <div class=" text-black shadow-lg rounded">
      <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title"> {{this.isEditting ? 'Editar gasto' : 'Crear gasto' }}</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"
        (click)="modal.close('Cerrado desde la ventana')">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form [formGroup]="this.newExpenseForm" (ngSubmit)="submitExpensesForm()" >
          <div class="form-group">


              <div class="d-flex justify-content-between">
<div>
                <div class="input-group mt-4">
                  <div class="input-group-text">
                    <img src="../../../assets/svg/tasksIconBlue.svg" class="svg-icon" alt="" />
                  </div>
                  <input id="taskName" class="form-control col-6 normal-border"
                    placeholder="{{this.isEditting ? this.expenseFromChild.taskName : 'Nombre del gasto'}}"
                    formControlName="taskName" name="dp"  [ngClass]="{
                                              'is-invalid':
                                                (this.newExpenseForm.controls.taskName.touched &&
                                                  this.newExpenseForm.controls.taskName.errors?.required) ||
                                                this.newExpenseForm.controls.taskName.errors?.minlength ||
                                                this.newExpenseForm.controls.taskName.errors?.maxlength
                                            }" />
                  <!-- Validation -->
                  <div class="invalid-feedback" *ngIf="this.newExpenseForm.controls.taskName.errors?.required">
                    ¡Tienes que rellenar este campo!
                  </div>
                  <div class="invalid-feedback" *ngIf="this.newExpenseForm.controls.taskName.errors?.minlength">
                    El mínimo son 3 caracteres
                  </div>
                  <div class="invalid-feedback" *ngIf="this.newExpenseForm.controls.taskName.errors?.maxlength">
                    El máximo son 50 caracteres
                  </div>
                </div>



            <div class="input-group mt-4 ">
              <div class="input-group-text">
                <img src="../../../assets/svg/pencilEdit.svg" class="svg-icon" alt="" />
              </div>
              <textarea id="dateOfBirth" class="form-control normal-border col-6s" formControlName="taskDescription" rows="3"
                placeholder="{{this.isEditting ? this.expenseFromChild.description : 'Introduce la descripción del gasto'}}"
                value="{{this.isEditting ? this.expenseFromChild.description : ''}}" name="dp" [ngClass]="{
                                              'is-invalid':
                                                (this.newExpenseForm.controls.taskDescription.touched &&
                                                  this.newExpenseForm.controls.taskDescription.errors?.required) ||
                                                this.newExpenseForm.controls.taskDescription.errors?.minlength ||
                                                this.newExpenseForm.controls.taskDescription.errors?.maxlength
                                            }"></textarea>
              <!--Validation-->
              <div class="invalid-feedback" *ngIf="this.newExpenseForm.controls.taskDescription.errors?.required">
                ¡Tienes que rellenar este campo!
              </div>
              <div class="invalid-feedback" *ngIf="this.newExpenseForm.controls.taskDescription.errors?.minlength">
                El mínimo son 3 caracteres
              </div>
              <div class="invalid-feedback" *ngIf="this.newExpenseForm.controls.taskDescription.errors?.maxlength">
                El máximo son 100 caracteres
              </div>
            </div>
</div>

<div>
                <div class="input-group">
                  <div class="input-group-text">
                    <img src="../../../assets/svg/username.svg" class="svg-icon" alt="" />
                  </div>
                  <select name="" id="" class="form-control col-6" formControlName="login">
                    <option  *ngFor="let user of this.groupUsers" [ngValue]="user.user.login">{{user.user.login}}</option>
                  </select>
                </div>

                <div class="input-group">
                  <div class="input-group-text">
                    <img src="../../../assets/svg/username.svg" class="svg-icon" alt="" />
                  </div>
                  <select name="" id="" class="form-control col-6" formControlName="login">
                    <option  *ngFor="let user of this.groupUsers" [ngValue]="user.user.login">{{user.user.login}}</option>
                  </select>
                </div>

              </div>


              </div>




          </div>


      <div class="modal-footer">
        <button class="btn btn-outline-info"  [ngClass]="{
                          disabled: !this.newExpenseForm.valid
                        }" [disabled]="!this.newExpenseForm.valid">
          {{this.isEditting ? 'Editar gasto' : 'Añadir gasto' }} </button>
      </div>
    </form>
  </div>
    </div>
  </div>
</ng-template>
